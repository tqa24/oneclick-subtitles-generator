@keyframes breathe {
  0%, 100% {
    transform: scale(1);
    text-shadow:
      0 0 2px var(--pulsing-glow-color),
      0 0 8px var(--pulsing-glow-color),
      0 0 16px var(--pulsing-glow-color),
      0 0 24px var(--pulsing-glow-color),
      0 0 32px var(--pulsing-glow-color),
      0 0 40px var(--pulsing-glow-color),
      0 0 60px var(--pulsing-glow-color);
    box-shadow:
      0 0 2px var(--pulsing-glow-color),
      0 0 8px var(--pulsing-glow-color),
      0 0 16px var(--pulsing-glow-color),
      0 0 24px var(--pulsing-glow-color),
      0 0 32px var(--pulsing-glow-color),
      0 0 40px var(--pulsing-glow-color),
      0 0 60px var(--pulsing-glow-color);
    filter: brightness(1) saturate(1.2);
  }
  25% {
    transform: scale(1.05) rotate(0.5deg);
    filter: brightness(1.1) saturate(1.4) hue-rotate(10deg);
  }
  50% {
    transform: scale(1.15) rotate(-0.5deg);
    text-shadow:
      0 0 3px var(--pulsing-glow-color),
      0 0 12px var(--pulsing-glow-color),
      0 0 24px var(--pulsing-glow-color),
      0 0 36px var(--pulsing-glow-color),
      0 0 48px var(--pulsing-glow-color),
      0 0 60px var(--pulsing-glow-color),
      0 0 80px var(--pulsing-glow-color),
      0 0 120px var(--pulsing-glow-color),
      0 0 160px var(--pulsing-glow-color);
    box-shadow:
      0 0 3px var(--pulsing-glow-color),
      0 0 12px var(--pulsing-glow-color),
      0 0 24px var(--pulsing-glow-color),
      0 0 36px var(--pulsing-glow-color),
      0 0 48px var(--pulsing-glow-color),
      0 0 60px var(--pulsing-glow-color),
      0 0 80px var(--pulsing-glow-color),
      0 0 120px var(--pulsing-glow-color),
      0 0 160px var(--pulsing-glow-color);
    filter: brightness(1.3) saturate(1.6) hue-rotate(-10deg);
  }
  75% {
    transform: scale(1.05) rotate(0.3deg);
    filter: brightness(1.1) saturate(1.3) hue-rotate(5deg);
  }
}

@keyframes breathe-dark {
  0%, 100% {
    transform: scale(1);
    text-shadow:
      0 0 2px var(--pulsing-glow-color),
      0 0 8px var(--pulsing-glow-color),
      0 0 16px var(--pulsing-glow-color),
      0 0 24px var(--pulsing-glow-color),
      0 0 32px var(--pulsing-glow-color),
      0 0 40px var(--pulsing-glow-color),
      0 0 60px var(--pulsing-glow-color);
    box-shadow:
      0 0 2px var(--pulsing-glow-color),
      0 0 8px var(--pulsing-glow-color),
      0 0 16px var(--pulsing-glow-color),
      0 0 24px var(--pulsing-glow-color),
      0 0 32px var(--pulsing-glow-color),
      0 0 40px var(--pulsing-glow-color),
      0 0 60px var(--pulsing-glow-color);
    filter: brightness(1) saturate(1.2);
  }
  25% {
    transform: scale(1.05) rotate(0.5deg);
    filter: brightness(1.1) saturate(1.4) hue-rotate(15deg);
  }
  50% {
    transform: scale(1.15) rotate(-0.5deg);
    text-shadow:
      0 0 3px var(--pulsing-glow-color),
      0 0 12px var(--pulsing-glow-color),
      0 0 24px var(--pulsing-glow-color),
      0 0 36px var(--pulsing-glow-color),
      0 0 48px var(--pulsing-glow-color),
      0 0 60px var(--pulsing-glow-color),
      0 0 80px var(--pulsing-glow-color),
      0 0 120px var(--pulsing-glow-color),
      0 0 160px var(--pulsing-glow-color);
    box-shadow:
      0 0 3px var(--pulsing-glow-color),
      0 0 12px var(--pulsing-glow-color),
      0 0 24px var(--pulsing-glow-color),
      0 0 36px var(--pulsing-glow-color),
      0 0 48px var(--pulsing-glow-color),
      0 0 60px var(--pulsing-glow-color),
      0 0 80px var(--pulsing-glow-color),
      0 0 120px var(--pulsing-glow-color),
      0 0 160px var(--pulsing-glow-color);
    filter: brightness(1.4) saturate(1.8) hue-rotate(-15deg);
  }
  75% {
    transform: scale(1.05) rotate(0.3deg);
    filter: brightness(1.2) saturate(1.5) hue-rotate(8deg);
  }
}

/* Particle shooting animations */
@keyframes particleShoot1 {
  0% {
    transform: translate(-50%, -50%) scale(0.3);
    opacity: 0;
  }
  15% {
    transform: translate(-50%, -50%) scale(0.8);
    opacity: 1;
  }
  40% {
    transform: translate(-50%, -50%) scale(1.2);
    opacity: 0.8;
  }
  70% {
    transform: translate(-50%, -50%) scale(1.8);
    opacity: 0.3;
  }
  100% {
    transform: translate(-50%, -50%) scale(2.5);
    opacity: 0;
  }
}

@keyframes particleShoot2 {
  0% {
    transform: translate(-50%, -50%) scale(0.2);
    opacity: 0;
  }
  20% {
    transform: translate(-50%, -50%) scale(0.6);
    opacity: 1;
  }
  45% {
    transform: translate(-50%, -50%) scale(1);
    opacity: 0.9;
  }
  75% {
    transform: translate(-50%, -50%) scale(1.6);
    opacity: 0.2;
  }
  100% {
    transform: translate(-50%, -50%) scale(2.2);
    opacity: 0;
  }
}

.pulsing-effect {
  position: relative;
  background: transparent;
  --pulsing-glow-color: currentColor;
  animation: breathe 2s ease-in-out infinite;
}

.pulsing-effect.refresh-icon-button {
  --pulsing-glow-color: var(--md-primary);
}

.pulsing-text {
  box-shadow: none !important;
}

/* Particle system container */
.pulsing-effect::before,
.pulsing-effect::after {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 80px;
  height: 80px;
  transform: translate(-50%, -50%);
  pointer-events: none;
  z-index: -1;
  border-radius: 50%;
}

/* First particle wave - shooting outward */
.pulsing-effect::before {
  background:
    radial-gradient(circle at 45% 15%, #ff6b6b 0.5px, transparent 1px),
    radial-gradient(circle at 85% 30%, #4ecdc4 0.5px, transparent 1px),
    radial-gradient(circle at 25% 75%, #45b7d1 0.5px, transparent 1px),
    radial-gradient(circle at 75% 85%, #f9ca24 0.5px, transparent 1px),
    radial-gradient(circle at 15% 45%, #6c5ce7 0.5px, transparent 1px),
    radial-gradient(circle at 65% 25%, #fd79a8 0.5px, transparent 1px),
    radial-gradient(circle at 35% 65%, #00b894 0.5px, transparent 1px),
    radial-gradient(circle at 55% 85%, #fdcb6e 0.5px, transparent 1px);
  animation: particleShoot1 3s infinite ease-out;
}

/* Second particle wave - different timing and positions */
.pulsing-effect::after {
  background:
    radial-gradient(circle at 70% 20%, #e17055 0.5px, transparent 1px),
    radial-gradient(circle at 20% 40%, #00cec9 0.5px, transparent 1px),
    radial-gradient(circle at 80% 70%, #0984e3 0.5px, transparent 1px),
    radial-gradient(circle at 40% 90%, #e84393 0.5px, transparent 1px),
    radial-gradient(circle at 90% 50%, #a29bfe 0.5px, transparent 1px),
    radial-gradient(circle at 30% 10%, #fd79a8 0.5px, transparent 1px),
    radial-gradient(circle at 60% 40%, #00b894 0.5px, transparent 1px),
    radial-gradient(circle at 10% 80%, #fdcb6e 0.5px, transparent 1px);
  animation: particleShoot2 3.5s infinite ease-out 1.2s;
}

/* Dark theme particles - matching glow colors */
[data-theme="dark"] .pulsing-effect::before {
  background:
    radial-gradient(circle at 45% 15%, rgba(96, 125, 255, 0.9) 0.5px, transparent 1px),
    radial-gradient(circle at 85% 30%, rgba(255, 107, 107, 0.8) 0.5px, transparent 1px),
    radial-gradient(circle at 25% 75%, rgba(78, 205, 196, 0.9) 0.5px, transparent 1px),
    radial-gradient(circle at 75% 85%, rgba(69, 183, 209, 0.8) 0.5px, transparent 1px),
    radial-gradient(circle at 15% 45%, rgba(249, 202, 36, 0.7) 0.5px, transparent 1px),
    radial-gradient(circle at 65% 25%, rgba(108, 92, 231, 0.8) 0.5px, transparent 1px),
    radial-gradient(circle at 35% 65%, rgba(253, 121, 168, 0.9) 0.5px, transparent 1px),
    radial-gradient(circle at 55% 85%, rgba(0, 184, 148, 0.8) 0.5px, transparent 1px);
}

[data-theme="dark"] .pulsing-effect::after {
  background:
    radial-gradient(circle at 70% 20%, rgba(253, 203, 110, 0.8) 0.5px, transparent 1px),
    radial-gradient(circle at 20% 40%, rgba(108, 92, 231, 0.7) 0.5px, transparent 1px),
    radial-gradient(circle at 80% 70%, rgba(255, 107, 107, 0.9) 0.5px, transparent 1px),
    radial-gradient(circle at 40% 90%, rgba(78, 205, 196, 0.8) 0.5px, transparent 1px),
    radial-gradient(circle at 90% 50%, rgba(96, 125, 255, 0.9) 0.5px, transparent 1px),
    radial-gradient(circle at 30% 10%, rgba(249, 202, 36, 0.8) 0.5px, transparent 1px),
    radial-gradient(circle at 60% 40%, rgba(253, 121, 168, 0.7) 0.5px, transparent 1px),
    radial-gradient(circle at 10% 80%, rgba(69, 183, 209, 0.8) 0.5px, transparent 1px);
}

/* Dark theme animation */
[data-theme="dark"] .pulsing-effect {
  animation: breathe-dark 2s ease-in-out infinite !important;
}
